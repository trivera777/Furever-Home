(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{113:function(e,t,n){},117:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n.n(a),r=n(68),s=n.n(r),i=n(9),o=n(4),l=(n(85),n(77)),j=n(130),d=n(132),u=n(129),b=n(76),m=(n(86),n(69)),h=n(70),O=n(71),p=new(function(){function e(){Object(m.a)(this,e)}return Object(h.a)(e,[{key:"getProfile",value:function(){return Object(O.a)(this.getToken())}},{key:"loggedIn",value:function(){var e=this.getToken();return!this.isTokenExpired(e)}},{key:"isTokenExpired",value:function(e){return null===e||void 0===e}},{key:"getToken",value:function(){return localStorage.getItem("id_token")}},{key:"getUsername",value:function(){return localStorage.getItem("username")}},{key:"getCurrentUser",value:function(){if(this.loggedIn())return{username:this.getUsername(),token:this.getToken()}}},{key:"login",value:function(e,t){localStorage.setItem("id_token",t),localStorage.setItem("username",e)}},{key:"logout",value:function(){localStorage.removeItem("id_token"),localStorage.removeItem("username")}}]),e}()),x=n(0),g=c.a.createContext(null),f=function(e){var t=e.user,n=e.children,c=Object(a.useState)(t),r=Object(i.a)(c,2),s=r[0],o=r[1],l=Object(a.useState)(!1),j=Object(i.a)(l,2),d=j[0],u=j[1],b=function(e){var t=e.username,n=e.token;p.login(t,n),o({username:t,token:n}),u(!0)};return Object(a.useEffect)((function(){var e=p.getCurrentUser();console.log(e),void 0!==e&&b(e)}),[]),Object(x.jsx)(g.Provider,{value:{currentUser:s,isLoggedIn:d,login:b,logout:function(){p.logout(),o(null),u(!1)}},children:n})},v=function(){return Object(a.useContext)(g)},N=n(35);function k(e){var t=e.menuOpen,n=e.setMenuOpen,a=v(),c=a.isLoggedIn,r=a.currentUser,s=a.logout;return console.log(c,r),Object(x.jsx)("div",{className:"navbar "+(t&&"active"),children:Object(x.jsxs)("div",{className:"wrapper",children:[Object(x.jsx)("div",{className:"left",children:Object(x.jsxs)("a",{href:"/",className:"logo",children:["Furever Home ",Object(x.jsx)("img",{src:"./img/paw.gif",alt:"Paw"})]})}),c&&Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)("div",{children:[Object(x.jsxs)("span",{children:["Welcome, ",null===r||void 0===r?void 0:r.username]})," ",Object(x.jsx)(N.a,{variant:"danger",onClick:s,children:"LOGOUT"})]})}),Object(x.jsx)("div",{className:"right",children:Object(x.jsxs)("div",{className:"hamburger",onClick:function(){return n(!t)},children:[Object(x.jsx)("span",{className:"line1"}),Object(x.jsx)("span",{className:"line2"}),Object(x.jsx)("span",{className:"line3"})]})})]})})}n(88);var y=n(18);function w(e){var t=e.menuOpen,n=e.setMenuOpen,a=v().isLoggedIn;return Object(x.jsx)("div",{className:"menu "+(t&&"active"),children:Object(x.jsxs)("ul",{children:[Object(x.jsx)("li",{children:Object(x.jsx)(y.b,{to:"/adopt",onClick:function(){return n(!1)},children:"Adopt"})}),!a&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("li",{children:Object(x.jsx)(y.b,{to:"/login",onClick:function(){return n(!1)},children:"Log In"})}),Object(x.jsx)("li",{children:Object(x.jsx)(y.b,{to:"/signup",onClick:function(){return n(!1)},children:"Sign Up"})})]}),a&&Object(x.jsx)("li",{onClick:function(){return n(!1)},children:Object(x.jsx)(y.b,{to:"/private",onClick:function(){return n},children:"Private Page"})})]})})}var S,C,I,P,L=n(7),T=n(10),U=n(29),B=(n(89),function(){return Object(x.jsx)("main",{className:"adopt",id:"adopt",children:Object(x.jsx)("div",{className:"container",children:Object(x.jsxs)(U.a,{children:[Object(x.jsx)("div",{className:"title",children:"Adoption Form"}),Object(x.jsx)("div",{className:"cardBody",children:Object(x.jsxs)(T.a,{children:[Object(x.jsxs)(T.a.Group,{className:"mb-3",children:[Object(x.jsx)(T.a.Label,{children:"First Name"}),Object(x.jsx)(T.a.Control,{className:"form-input",placeholder:"First Name",name:"firstName",type:"firstName"})]}),Object(x.jsxs)(T.a.Group,{className:"mb-3",children:[Object(x.jsx)(T.a.Label,{children:"Last Name"}),Object(x.jsx)(T.a.Control,{className:"form-input",placeholder:"Last Name",name:"lastName",type:"lastName"})]}),Object(x.jsxs)(T.a.Group,{className:"mb-3",controlId:"formBasicPassword",children:[Object(x.jsx)(T.a.Label,{children:"Email"}),Object(x.jsx)(T.a.Control,{className:"form-input",placeholder:"your@email.com",name:"email",type:"email"})]}),Object(x.jsx)("button",{variant:"outline-dark",type:"submit",children:"Submit"})]})})]})})})}),E=n(14),F=n.n(E),$=n(19),_=n(24),G=n(133),z=n(41),D=n(131),A=Object(D.a)(S||(S=Object(z.a)(["\nmutation createUser($username:String!, $email:String!, $password:String!){\n    createUser(username:$username, email:$email, password: $password){\n      token\n      __typename\n      \n    }\n  }"]))),J=Object(D.a)(C||(C=Object(z.a)(["\nmutation loginUser($email: String!, $password: String!){\n    loginUser(email:$email, password:$password) {\n      token\n      user{\n        username\n      }\n    }\n    \n  }"]))),M=(Object(D.a)(I||(I=Object(z.a)(["\nmutation savePet($PetInput:PetInput!){\n\tsavePet(PetInput:$PetInput){\n    username\n    savedPets{\n      type\n      description\n      petId\n      image\n      link\n      name\n    }\n  }  \n}"]))),Object(D.a)(P||(P=Object(z.a)(["\nmutation deletePet($petId: String!){\n    deletePet(petId: $petId) {\n      username\n      savedPets{\n        _id\n      }\n    }\n    \n  } "]))),n(93),function(e){var t=v().login,n=Object(a.useState)({email:"",password:""}),c=Object(i.a)(n,2),r=c[0],s=c[1],l=Object(G.a)(J),j=Object(i.a)(l,2),d=(j[0],j[1]),u=d.error,b=(d.data,Object(L.g)()),m=function(e){var t=e.target,n=t.name,a=t.value;s(Object(o.a)(Object(o.a)({},r),{},Object(_.a)({},n,a)))},h=function(){var e=Object($.a)(F.a.mark((function e(n){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),console.log(r);try{t({username:r.email,token:r.password}),b("/")}catch(a){console.error(a)}s({email:"",password:""});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(x.jsx)("main",{className:"login",id:"login",children:Object(x.jsx)("div",{className:"container",children:Object(x.jsxs)(U.a,{children:[Object(x.jsx)("div",{className:"title",children:"Login"}),Object(x.jsxs)("div",{className:"cardBody",children:[Object(x.jsxs)(T.a,{onSubmit:h,children:[Object(x.jsxs)(T.a.Group,{className:"mb-3",children:[Object(x.jsx)(T.a.Label,{children:"Email address"}),Object(x.jsx)(T.a.Control,{className:"form-input",placeholder:"Enter email",name:"email",type:"email",value:r.email,onChange:m})]}),Object(x.jsxs)(T.a.Group,{className:"mb-3",controlId:"formBasicPassword",children:[Object(x.jsx)(T.a.Label,{children:"Password"}),Object(x.jsx)(T.a.Control,{className:"form-input",placeholder:"******",name:"password",type:"password",value:r.password,onChange:m})]}),Object(x.jsx)("button",{variant:"outline-dark",type:"submit",children:"Submit"})]}),u&&Object(x.jsx)("div",{className:"my-3 p-3 bg-danger text-white",children:u.message})]})]})})})}),H=(n(94),function(){var e=Object(a.useState)({username:"",email:"",password:""}),t=Object(i.a)(e,2),n=t[0],c=t[1],r=Object(G.a)(A),s=Object(i.a)(r,2),l=s[0],j=s[1],d=j.error,u=j.data,b=function(e){var t=e.target,a=t.name,r=t.value;c(Object(o.a)(Object(o.a)({},n),{},Object(_.a)({},a,r)))},m=function(){var e=Object($.a)(F.a.mark((function e(t){var a,c;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log(n),e.prev=2,e.next=5,l({variables:Object(o.a)({},n)});case 5:a=e.sent,c=a.data,p.login(c.addUser.token),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(x.jsx)("main",{className:"signup",id:"signup",children:Object(x.jsx)("div",{className:"container",children:Object(x.jsxs)(U.a,{children:[Object(x.jsx)("div",{className:"title",children:"Sign Up"}),Object(x.jsxs)("div",{className:"cardBody",children:[u?Object(x.jsxs)(T.a,{children:["Success! You may now head"," ",Object(x.jsx)(y.b,{to:"/",children:"back to the homepage."})]}):Object(x.jsxs)(T.a,{onSubmit:m,children:[Object(x.jsxs)(T.a.Group,{className:"mb-3",children:[Object(x.jsx)(T.a.Label,{children:"Username"}),Object(x.jsx)(T.a.Control,{className:"form-input",placeholder:"Enter username",name:"username",type:"text",value:n.name,onChange:b})]}),Object(x.jsxs)(T.a.Group,{className:"mb-3",controlId:"formBasicPassword",children:[Object(x.jsx)(T.a.Label,{children:"Email"}),Object(x.jsx)(T.a.Control,{className:"form-input",placeholder:"Enter email",name:"email",type:"email",value:n.email,onChange:b})]}),Object(x.jsxs)(T.a.Group,{className:"mb-3",controlId:"formBasicPassword",children:[Object(x.jsx)(T.a.Label,{children:"Password"}),Object(x.jsx)(T.a.Control,{className:"form-input",placeholder:"******",name:"password",type:"password",value:n.password,onChange:b})]}),Object(x.jsx)(N.a,{variant:"outline-dark",type:"submit",children:"Submit"})]}),d&&Object(x.jsxs)(U.a,{children:[Object(x.jsx)(U.a.Header,{children:"Sign Up"}),d.message]})]})]})})})}),R=function(e){var t=e.children,n=Object(L.f)();v().isLoggedIn;return p.loggedIn()?t:Object(x.jsx)(L.a,{to:"/",state:{from:n}})},V=(n(95),n(127)),q=n(128);var K=function(e){return Object(x.jsx)("form",{onSubmit:e.handleFormSubmit,children:Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{htmlFor:"petType",children:"Choose a pet:"}),Object(x.jsxs)("select",{className:"form-control",id:"pets",name:"pets",value:e.pets,onChange:e.handleInputChange,children:[Object(x.jsx)("option",{value:"dog",children:"Dogs"}),Object(x.jsx)("option",{value:"cat",children:"Cats"})]}),Object(x.jsx)("br",{}),Object(x.jsx)("label",{htmlFor:"breed",children:"Breed"}),Object(x.jsx)("input",{onChange:e.handleInputChange,value:e.breed,name:"breed",type:"text",className:"form-control",placeholder:"Search for a breed",id:"breed"}),Object(x.jsx)("label",{htmlFor:"zip",children:"Zip Code"}),Object(x.jsx)("input",{onChange:e.handleInputChange,value:e.zip,name:"zip",type:"text",className:"form-control",placeholder:"80516",id:"zip"}),Object(x.jsx)("label",{htmlFor:"distance",children:"Search Radius(miles)"}),Object(x.jsx)("input",{onChange:e.handleInputChange,value:e.distance,name:"distance",type:"text",className:"form-control",placeholder:"100",id:"distance"}),Object(x.jsx)("br",{}),Object(x.jsx)("input",{className:"btn btn-primary",type:"submit",value:"Search"})]})})},W=(n(75),"GDqDG1ZrAE2oA2D1zSfP96XsKcu80r3RxUftUriTPOBNB5a7T8"),X="2YCsDdJVKrnPF4EzJlJbXwr9aMHVmDC0Tu6iuJ00",Y=Object(a.createContext)(),Z=function(e){var t=e.children,n=Object(a.useState)(null),c=Object(i.a)(n,2),r=c[0],s=c[1];return Object(a.useEffect)((function(){console.log("Inside PethAuthContext"),console.log(W,X);var e=function(){var e=Object($.a)(F.a.mark((function e(){var t,n,a;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new URLSearchParams).append("grant_type","client_credentials"),t.append("client_id",W),t.append("client_secret",X),e.next=6,fetch("https://api.petfinder.com/v2/oauth2/token",{method:"POST",body:t});case 6:return n=e.sent,e.next=9,n.json();case 9:a=e.sent,console.log(a),s(a.access_token),console.log(a.access_token);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),Object(x.jsx)(Y.Provider,{value:{accessToken:r},children:t})},Q=function(){return Object(a.useContext)(Y)},ee=(n(113),n(114),function(e){var t=e.key,n=e.pet,c=Object(a.useState)("false"),r=Object(i.a)(c,2);r[0],r[1];return Object(x.jsxs)(U.a,{style:{width:"18rem",margin:"10px"},children:[n.photos.length?Object(x.jsx)(U.a.Img,{src:n.photos[0].small,alt:"The cover for ".concat(n.name),variant:"top"}):null,Object(x.jsxs)(U.a.Body,{children:[Object(x.jsx)(U.a.Title,{children:n.name}),Object(x.jsxs)(U.a.Text,{children:[n.breed,n.description]}),Object(x.jsxs)(U.a.Text,{children:["Distance: ",n.distance," Gender",n.gender,"  Age: ",n.age]}),Object(x.jsx)(U.a.Link,{href:n.url,children:"Favorite"}),Object(x.jsx)(U.a.Link,{href:"/detail/"+n.id,children:"Learn more "})]})]},t)});function te(){var e=Object(a.useState)("dog"),t=Object(i.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(""),s=Object(i.a)(r,2),o=s[0],l=s[1],j=Object(a.useState)("80516"),d=Object(i.a)(j,2),u=d[0],b=d[1],m=Object(a.useState)("100"),h=Object(i.a)(m,2),O=h[0],p=h[1],g=Object(a.useState)([]),f=Object(i.a)(g,2),v=f[0],N=f[1],k=Q().accessToken,y=function(){var e=Object($.a)(F.a.mark((function e(t,n,a,c){var r,s;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(k),e.next=3,fetch("https://api.petfinder.com/v2/animals?type=".concat(t,"&location=").concat(a),{headers:{Authorization:"Bearer ".concat(k)}});case 3:return r=e.sent,e.next=6,r.json();case 6:s=e.sent,N(s.animals);case 8:case"end":return e.stop()}}),e)})));return function(t,n,a,c){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){console.log(v)}),[v]);return Object(x.jsx)("div",{className:"home",id:"home",children:Object(x.jsxs)("div",{className:"container",children:[Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)("div",{className:"col-8",children:Object(x.jsx)("div",{className:"header",children:"Whether you're looking for a hiking buddy, a snuggle buddy - small or large, we'll help you find your forever friend!"})}),Object(x.jsx)("div",{className:"col-4",children:Object(x.jsx)(K,{pets:n,breed:o,zip:u,distance:O,handleInputChange:function(e){var t=e.target,n=t.name,a=t.value;"pets"===n?c(a):"breed"===n?l(a):"zip"===n?b(a):p(a)},handleFormSubmit:function(e){e.preventDefault(),y(n,o,u,O)}})})]}),Object(x.jsx)(V.a,{fluid:"md",children:Object(x.jsxs)(q.a,{className:"my-3 mx-3",children:[Object(x.jsx)("h2",{children:v.length?"Viewing ".concat(v.length," pets:"):"No Pets found, please change search criteria"}),v.map((function(e){return Object(x.jsx)(ee,{pet:e},e.id)})),")"]})})]})})}var ne=function(){return Object(x.jsx)("main",{className:"login",id:"login",children:Object(x.jsx)("div",{className:"container",children:Object(x.jsx)("div",{children:"Need to be logged in to see this!"})})})},ae=function(){var e=Object(L.h)().id;console.log(e);var t=Q().accessToken,n=Object(a.useState)({}),c=Object(i.a)(n,2),r=c[0],s=c[1];return Object(a.useEffect)(Object($.a)(F.a.mark((function n(){var a,c;return F.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("https://api.petfinder.com/v2/animals/".concat(e)),n.next=3,fetch("https://api.petfinder.com/v2/animals/".concat(e),{headers:{Authorization:"Bearer ".concat(t)}});case 3:return a=n.sent,n.next=6,a.json();case 6:c=n.sent,s(c);case 8:case"end":return n.stop()}}),n)}))),[]),Object(x.jsxs)(x.Fragment,{children:[console.log(r),"Pet Details go here ",e]})},ce=function(e){var t=e.children;return Object(x.jsx)(Z,{children:Object(x.jsxs)(y.a,{children:[t,Object(x.jsxs)(L.d,{children:[Object(x.jsx)(L.b,{exact:!0,path:"/",element:Object(x.jsx)(te,{})}),Object(x.jsx)(L.b,{exact:!0,path:"/adopt",element:Object(x.jsx)(B,{})}),Object(x.jsx)(L.b,{exact:!0,path:"/login",element:Object(x.jsx)(M,{})}),Object(x.jsx)(L.b,{exact:!0,path:"/signup",element:Object(x.jsx)(H,{})}),Object(x.jsx)(L.b,{exact:!0,path:"/detail/:id",element:Object(x.jsx)(ae,{})}),Object(x.jsx)(L.b,{exact:!0,path:"/private",element:Object(x.jsx)(R,{children:Object(x.jsx)(ne,{})})})]})]})})},re=Object(l.a)({uri:"/graphql"}),se=Object(b.a)((function(e,t){var n=t.headers,a=localStorage.getItem("id_token");return{headers:Object(o.a)(Object(o.a)({},n),{},{authorization:a?"Bearer ".concat(a):""})}})),ie=new j.a({link:se.concat(re),cache:new d.a});var oe=function(){var e=Object(a.useState)(!1),t=Object(i.a)(e,2),n=t[0],c=t[1];return Object(x.jsx)(u.a,{client:ie,children:Object(x.jsx)(f,{children:Object(x.jsxs)(ce,{children:[Object(x.jsx)(k,{menuOpen:n,setMenuOpen:c}),Object(x.jsx)(w,{menuOpen:n,setMenuOpen:c})]})})})};s.a.render(Object(x.jsx)(c.a.StrictMode,{children:Object(x.jsx)(oe,{})}),document.getElementById("root"))},85:function(e,t,n){},86:function(e,t,n){},88:function(e,t,n){},89:function(e,t,n){},93:function(e,t,n){},94:function(e,t,n){},95:function(e,t,n){}},[[117,1,2]]]);
//# sourceMappingURL=main.2b322f6a.chunk.js.map