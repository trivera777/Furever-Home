(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{64:function(e,t,n){},66:function(e,t,n){},67:function(e,t,n){},70:function(e,t,n){},71:function(e,t,n){"use strict";n.r(t);var a=n(3),c=n.n(a),r=n(50),s=n.n(r),i=n(9),o=n(5),l=n(56),j=n(82),u=n(84),d=n(81),b=n(55),m=(n(64),n(51)),O=n(52),h=n(42),p=new(function(){function e(){Object(m.a)(this,e)}return Object(O.a)(e,[{key:"getProfile",value:function(){return Object(h.a)(this.getToken())}},{key:"loggedIn",value:function(){var e=this.getToken();return!this.isTokenExpired(e)}},{key:"isTokenExpired",value:function(e){return Object(h.a)(e).exp<Date.now()/1e3&&(localStorage.removeItem("id_token"),!0)}},{key:"getToken",value:function(){return localStorage.getItem("id_token")}},{key:"getUsername",value:function(){return localStorage.getItem("username")}},{key:"getCurrentUser",value:function(){if(this.loggedIn())return{username:this.getUsername(),token:this.getToken()}}},{key:"login",value:function(e,t){localStorage.setItem("id_token",t),localStorage.setItem("username",e)}},{key:"logout",value:function(){localStorage.removeItem("id_token"),localStorage.removeItem("username")}}]),e}()),x=n(2),g=c.a.createContext(null),v=function(e){var t=e.user,n=e.children,c=Object(a.useState)(t),r=Object(i.a)(c,2),s=r[0],o=r[1],l=Object(a.useState)(!1),j=Object(i.a)(l,2),u=j[0],d=j[1],b=function(e){var t=e.username,n=e.token;p.login(t,n),o({username:t,token:n}),d(!0)};return Object(a.useEffect)((function(){var e=p.getCurrentUser();console.log(e),void 0!==e&&b(e)}),[]),Object(x.jsx)(g.Provider,{value:{currentUser:s,isLoggedIn:u,login:b,logout:function(){p.logout(),o(null),d(!1)}},children:n})},f=function(){return Object(a.useContext)(g)};function k(e){var t=e.menuOpen,n=e.setMenuOpen,a=f(),c=a.isLoggedIn,r=a.currentUser,s=a.logout;return console.log(c,r),Object(x.jsx)("div",{className:"navbar "+(t&&"active"),children:Object(x.jsxs)("div",{className:"wrapper",children:[Object(x.jsx)("div",{className:"left",children:Object(x.jsxs)("a",{href:"/",className:"logo",children:["Furever Home ",Object(x.jsx)("img",{src:"./img/paw.gif",alt:"Paw"})]})}),c&&Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)("div",{children:[Object(x.jsxs)("span",{children:["logged in: ",null===r||void 0===r?void 0:r.username]})," ",Object(x.jsx)("button",{onClick:s,children:"logout"})]})}),Object(x.jsx)("div",{className:"right",children:Object(x.jsxs)("div",{className:"hamburger",onClick:function(){return n(!t)},children:[Object(x.jsx)("span",{className:"line1"}),Object(x.jsx)("span",{className:"line2"}),Object(x.jsx)("span",{className:"line3"})]})})]})})}n(66);var y=n(13);function w(e){var t=e.menuOpen,n=e.setMenuOpen,a=f().isLoggedIn;return Object(x.jsx)("div",{className:"menu "+(t&&"active"),children:Object(x.jsxs)("ul",{children:[Object(x.jsx)("li",{children:Object(x.jsx)(y.b,{to:"/",onClick:function(){return n(!1)},children:"Adopt"})}),!a&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("li",{children:Object(x.jsx)(y.b,{to:"/login",onClick:function(){return n(!1)},children:"Log In"})}),Object(x.jsx)("li",{children:Object(x.jsx)(y.b,{to:"/signup",onClick:function(){return n(!1)},children:"Sign Up"})})]}),a&&Object(x.jsx)("li",{onClick:function(){return n(!1)},children:Object(x.jsx)(y.b,{to:"/private",onClick:function(){return n},children:"Private Page"})})]})})}var N=n(4),S=n(29),I=n(57);n(67);function C(){return Object(x.jsx)("div",{className:"adopt",id:"adopt",children:Object(x.jsxs)("div",{className:"wrapper",children:["Available Pets",Object(x.jsxs)(S.a,{style:{width:"18rem"},children:[Object(x.jsx)(S.a.Img,{variant:"top",src:"holder.js/100px180"}),Object(x.jsxs)(S.a.Body,{children:[Object(x.jsx)(S.a.Title,{children:"Name"}),Object(x.jsx)(S.a.Text,{children:"Description of animal"}),Object(x.jsx)(I.a,{variant:"primary",children:"Adopt Me"})]})]})]})})}var P,$,U,T,_=n(27),L=n.n(_),M=n(35),Y=n(26),D=n(85),E=n(33),A=n(83),B=Object(A.a)(P||(P=Object(E.a)(["\nmutation createUser($username:String!, $email:String!, $password:String!){\n    createUser(username:$username, email:$email, password: $password){\n      token\n      __typename\n      \n    }\n  }"]))),F=Object(A.a)($||($=Object(E.a)(["\nmutation loginUser($email: String!, $password: String!){\n    loginUser(email:$email, password:$password) {\n      token\n      user{\n        username\n      }\n    }\n    \n  }"]))),J=(Object(A.a)(U||(U=Object(E.a)(["\nmutation savePet($PetInput:PetInput!){\n\tsavePet(PetInput:$PetInput){\n    username\n    savedPets{\n      type\n      description\n      petId\n      image\n      link\n      name\n    }\n  }  \n}"]))),Object(A.a)(T||(T=Object(E.a)(["\nmutation deletePet($petId: String!){\n    deletePet(petId: $petId) {\n      username\n      savedPets{\n        _id\n      }\n    }\n    \n  }"]))),function(e){var t=f().login,n=Object(a.useState)({email:"",password:""}),c=Object(i.a)(n,2),r=c[0],s=c[1],l=Object(D.a)(F),j=Object(i.a)(l,2),u=j[0],d=j[1],b=d.error,m=d.data,O=Object(N.g)(),h=function(e){var t=e.target,n=t.name,a=t.value;s(Object(o.a)(Object(o.a)({},r),{},Object(Y.a)({},n,a)))},p=function(){var e=Object(M.a)(L.a.mark((function e(n){var a;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),console.log(r),e.prev=2,e.next=5,u({variables:Object(o.a)({},r)});case 5:a=e.sent,a.data,t({username:r.email,token:r.password}),O("/"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),console.error(e.t0);case 14:s({email:"",password:""});case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(x.jsx)("main",{className:"flex-row justify-center mb-4",children:Object(x.jsx)("div",{className:"col-12 col-lg-10",children:Object(x.jsxs)("div",{className:"card",children:[Object(x.jsx)("h4",{className:"card-header bg-dark text-light p-2",children:"Login"}),Object(x.jsxs)("div",{className:"card-body",children:[m?Object(x.jsxs)("p",{children:["Success! You may now head"," ",Object(x.jsx)(y.b,{to:"/",children:"back to the homepage."})]}):Object(x.jsxs)("form",{onSubmit:p,children:[Object(x.jsx)("input",{className:"form-input",placeholder:"Your email",name:"email",type:"email",value:r.email,onChange:h}),Object(x.jsx)("input",{className:"form-input",placeholder:"******",name:"password",type:"password",value:r.password,onChange:h}),Object(x.jsx)("button",{className:"btn btn-block btn-primary",style:{cursor:"pointer"},type:"submit",children:"Submit"})]}),b&&Object(x.jsx)("div",{className:"my-3 p-3 bg-danger text-white",children:b.message})]})]})})})}),q=function(){var e=Object(a.useState)({username:"",email:"",password:""}),t=Object(i.a)(e,2),n=t[0],c=t[1],r=Object(D.a)(B),s=Object(i.a)(r,2),l=s[0],j=s[1],u=j.error,d=j.data,b=function(e){var t=e.target,a=t.name,r=t.value;c(Object(o.a)(Object(o.a)({},n),{},Object(Y.a)({},a,r)))},m=function(){var e=Object(M.a)(L.a.mark((function e(t){var a,c;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log(n),e.prev=2,e.next=5,l({variables:Object(o.a)({},n)});case 5:a=e.sent,c=a.data,p.login(c.addUser.token),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(x.jsx)("main",{className:"flex-row justify-center mb-4",children:Object(x.jsx)("div",{className:"col-12 col-lg-10",children:Object(x.jsxs)("div",{className:"card",children:[Object(x.jsx)("h4",{className:"card-header bg-dark text-light p-2",children:"Sign Up"}),Object(x.jsxs)("div",{className:"card-body",children:[d?Object(x.jsxs)("p",{children:["Success! You may now head"," ",Object(x.jsx)(y.b,{to:"/",children:"back to the homepage."})]}):Object(x.jsxs)("form",{onSubmit:m,children:[Object(x.jsx)("input",{className:"form-input",placeholder:"Your username",name:"username",type:"text",value:n.name,onChange:b}),Object(x.jsx)("input",{className:"form-input",placeholder:"Your email",name:"email",type:"email",value:n.email,onChange:b}),Object(x.jsx)("input",{className:"form-input",placeholder:"******",name:"password",type:"password",value:n.password,onChange:b}),Object(x.jsx)("button",{className:"btn btn-block btn-primary",style:{cursor:"pointer"},type:"submit",children:"Submit"})]}),u&&Object(x.jsx)("div",{className:"my-3 p-3 bg-danger text-white",children:u.message})]})]})})})},z=function(e){var t=e.children,n=Object(N.f)();f().isLoggedIn;return p.loggedIn()?t:Object(x.jsx)(N.a,{to:"/",state:{from:n}})};n(70);function H(){return Object(x.jsx)("div",{className:"home",id:"home",children:Object(x.jsx)("div",{className:"container",children:Object(x.jsx)("div",{className:"header",children:"Whether you're looking for a hiking buddy, a snuggle buddy - small or large, we'll help you find your forever friend!"})})})}var W=function(){return Object(x.jsx)("div",{children:"Need to be logged in to see this!"})},G=function(e){var t=e.children;return Object(x.jsxs)(y.a,{children:[t,Object(x.jsxs)(N.d,{children:[Object(x.jsx)(N.b,{exact:!0,path:"/",element:Object(x.jsx)(H,{})}),Object(x.jsx)(N.b,{exact:!0,path:"/adopt",element:Object(x.jsx)(C,{})}),Object(x.jsx)(N.b,{exact:!0,path:"/login",element:Object(x.jsx)(J,{})}),Object(x.jsx)(N.b,{exact:!0,path:"/signup",element:Object(x.jsx)(q,{})}),Object(x.jsx)(N.b,{exact:!0,path:"/private",element:Object(x.jsx)(z,{children:Object(x.jsx)(W,{})})})]})]})},K=Object(l.a)({uri:"/graphql"}),Q=Object(b.a)((function(e,t){var n=t.headers,a=localStorage.getItem("id_token");return{headers:Object(o.a)(Object(o.a)({},n),{},{authorization:a?"Bearer ".concat(a):""})}})),R=new j.a({link:Q.concat(K),cache:new u.a});var V=function(){var e=Object(a.useState)(!1),t=Object(i.a)(e,2),n=t[0],c=t[1];return Object(x.jsx)(d.a,{client:R,children:Object(x.jsx)(v,{children:Object(x.jsxs)(G,{children:[Object(x.jsx)(k,{menuOpen:n,setMenuOpen:c}),Object(x.jsx)(w,{menuOpen:n,setMenuOpen:c})]})})})};s.a.render(Object(x.jsx)(c.a.StrictMode,{children:Object(x.jsx)(V,{})}),document.getElementById("root"))}},[[71,1,2]]]);
//# sourceMappingURL=main.e133ecf4.chunk.js.map